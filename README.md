# Тестовое задание для отбора на Летнюю ИТ-школу КРОК по разработке

## Условие задания
Будучи тимлидом команды разработки, вы получили от менеджера проекта задачу повысить скорость разработки. Звучит, как начало плохого анекдота, но, тем не менее, решение вам все же нужно найти. В ходе размышлений и изучений различного внешнего опыта других команд разработки вы решили попробовать инструменты геймификации. То есть применить техники и подходы игрового характера с целью повышения вовлеченности команды в решение задач.

Вами была придумана рейтинговая таблица самых активных контрибьютеров за спринт. Что это значит в теории: по окончании итерации (4 рабочие недели) выгружается список коммитов, сделанных в релизную ветку продукта, и на его основе вычисляются трое самых активных разработчиков, сделавших наибольшее количество коммитов. В зависимости от занятого места, разработчик получает определенное количество внутренней валюты вашей компании, которую он впоследствии может обменять на какие-то товары из внутреннего магазина.

На практике вы видите решение следующим образом: на следующий день после окончания спринта в 00:00 запускается автоматическая процедура, которая забирает файл с данными о коммитах в релизную ветку, сделанных в период спринта, после чего выполняется поиск 3-х самых активных контрибьютеров. Имена найденных разработчиков записываются в файл, который впоследствии отправляется вам на почту.

В рамках практической реализации данной задачи вам необходимо разработать процедуру формирование отчета “Топ-3 контрибьютера”. Данная процедура принимает на вход текстовый файл (commits.txt), содержащий данные о коммитах (построчно). Каждая строка содержит сведения о коммите в релизную ветку в формате: “_<Имя пользователя> <Сокращенный хэш коммита> <Дата и время коммита>_”.
Например: AIvanov 25ec001 2024-04-24T13:56:39.492

К данным предъявляются следующие требования:
- имя пользователя может содержать латинские символы в любом регистре, цифры (но не начинаться с них), а также символ "_";
- сокращенный хэш коммита представляет из себя строку в нижнем регистре, состояющую из 7 символов: букв латинского алфавита, а также цифр;
- дата и время коммита в формате YYYY-MM-ddTHH:mm:ss.

В результате работы процедура формирует новый файл (result.txt), содержащий информацию об именах 3-х самых активных пользователей по одному в каждой строке в порядке убывания места в рейтинге. Пример содержимого файла:
AIvanov
AKalinina
CodeKiller777

Ручной ввод пути к файлу (через консоль, через правку переменной в коде и т.д.) недопустим. Необходимость любых ручных действий с файлами в процессе работы программы будут обнулять решение.

## Автор решения

Марина Ефремова, <br> marinaejoy1@yandex.ru

Была бы рада обратной связи :)

## Описание реализации

Сам проект небольшой, содержит всего два класса: ``Main`` и ``Commits``.

### 1. ``Commits``

#### Атрибуты: 
* ``nickname`` типа ``String`` — хранит никнейм сделавшего коммит, не может быть изменена после создания;
* ``commitDate`` типа ``LocalDateTime`` — хранит дату и время последнего коммита того или иного человека;
* ``commitCount`` типа ``int`` — хранит количество коммитов, сделанным тем или иным человеком.

У них всех идентификатор доступа ``private`` (согласно принципу инкапсуляции в ООП).

#### Методы:
Для каждого из полей есть по геттеру, а сеттеры есть только у ``commitDate`` и ``commitCount``, так как ``nickname`` — неизменяемая переменная.

#### Создание нового объекта:
При создании нового объекта в конструктор обязательно нужно внести два значения: 
* никнейм человека;
* дату и время коммита.

Счетчик инициализируется автоматически.

### 2. ``Main``

Стоит упомянуть про принцип отбора трех отличившихся в спринте. 
Первенство отдается тому, кто сделал больше всего коммитов. 
Но если возникла такая ситуация, 
что претендентов на почетные места больше, чем самих почетных мест (например, первое и второе места определены однозначно, а на третье претендует два человека с одинаковым количеством коммитов),
то учитывается дата и время подачи последнего коммита (вплоть до миллисекунд). 

Это не самый справедливый метод, но важно соблюсти условие про трех победителей спринта (хоть в реальности и возможно, что какое-то место делят двое-трое). 
Тем более, у нас не имеется информация о победителях прошлого спринта (иначе можно было бы сделать что-то типа накопленного рейтинга).

Также стоит объяснить отсутствие проверки данных тем, что данные создаются автоматически, а не человеком. 
Если в данных есть ошибка, то это проблема генератора, и их надо править на той стороне.

Что насчет самого класса, там нет переменных (только если внутри методов),
так что есть смысл рассмотреть только сами методы.

* #### ``public static void main(String[] args)``

Самый главный метод, отправная точка программы. 
Открывает поток ``BufferedReader``, 
передавая все операции с ним функции ``getBufferedReader()``, 
затем его закрывает.

* #### ``BufferedReader getBufferedReader()``

Создает контейнер  ``data`` типа ``ArrayList``. 
Открывает поток чтения данных из файла ``commits.txt`` (в программе есть этот файл чисто для примера). 
Затем читает построчно данные из файла в цикле. 
В ``data`` добавляется новый никнейм вместе с датой и временем коммита, если его там не обнаружено,
и дополняется свежей датой вместе с обновлением счетчика коммитов, если человек уже записан. В этом помогает метод ``isInData``. 
Контейнер передается функции ``writeResults``.

После выполнения всех функций возвращает поток ``BufferedReader`` (который затем закрывается в методе ``main``).

* #### ``isInData(ArrayList<Commits> data, String nick)``

Ищет наличие человека в контейнере по никнейму. 
Возвращает индекс, под которым находятся о нем данные, 
и ``-1``, если ничего не найдено.

* #### `` public static void writeResults(ArrayList<Commits> data)``

Открывает поток записи в файл ``result.txt``. 
Получает с помощью метода ``getResults`` трех победителей в виде массива строк (``String[]``) и печатает их в файл.
Выводит в консоль сообщение успешности об записи в файл. 
При успешном варианте еще и выводит путь к файлу ``result.txt``. 

* #### ``public static String[] getResults (ArrayList<Commits> data)``

Если контейнер ``data``, принятый методом, пустой, то возвращается массив строк с одной записью: ``"Победителей нет."``.

Если в контейнере всего одна запись, тогда возвращается массив строк с одним никнеймом.

Программа сортирует ``data`` по убыванию по параметрам ``getCommitsCount`` и ``getCommitDate``.
Затем создается массив строк ``ans``. 

Если размер контейнера равен двум, то вносится две записи в ``ans``. Иначе — все три.
Затем метод возвращает ``ans``.

## Инструкция по сборке и запуску решения

Как выполнить программу:
1) открыть консоль;
2) убедиться, что файл ``commits.txt`` находится в папке src проекта: ``..\CrocTestTask2024\test_project\src``;
3) в этой же папке (перейти в нее можно с помощью команды ``cd``) скомпилировать программу командой ``javac Main.java``;
4) запустить программу командой ``java Main``.

Если консоль пишет, что не знает команду ``javac``, тогда нужно:

*(для Windows)*
1) установить JDK (https://www.oracle.com/java/technologies/downloads/#jdk21-windows);
2)  *(если все еще не заработало)* перейти в: Параметры -> Система -> О программе -> Дополнительные параметры системы -> Переменные среды — создать новую системную переменную JAVA_HOME, указав для нее путь папки с ранее установленной JDK;
3) проверить, что javac теперь работает должным образом.

*(для Linux)*
* обычно консоль сразу пишет, какую команду надо выполнить для установки необходимых компонент (например, ``sudo apt install default-jdk``).

Результат работы: если консоль не вернула сообщение с ошибкой, то создается файл result.txt в рабочей папке. Путь к этому файлу будет также выведен в консоль.
