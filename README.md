# Тестовое задание для отбора на Летнюю ИТ-школу КРОК по разработке

## Условие задания
Будучи тимлидом команды разработки, вы получили от менеджера проекта задачу повысить скорость разработки. Звучит, как начало плохого анекдота, но, тем не менее, решение вам все же нужно найти. В ходе размышлений и изучений различного внешнего опыта других команд разработки вы решили попробовать инструменты геймификации. То есть применить техники и подходы игрового характера с целью повышения вовлеченности команды в решение задач.

Вами была придумана рейтинговая таблица самых активных контрибьютеров за спринт. Что это значит в теории: по окончании итерации (4 рабочие недели) выгружается список коммитов, сделанных в релизную ветку продукта, и на его основе вычисляются трое самых активных разработчиков, сделавших наибольшее количество коммитов. В зависимости от занятого места, разработчик получает определенное количество внутренней валюты вашей компании, которую он впоследствии может обменять на какие-то товары из внутреннего магазина.

На практике вы видите решение следующим образом: на следующий день после окончания спринта в 00:00 запускается автоматическая процедура, которая забирает файл с данными о коммитах в релизную ветку, сделанных в период спринта, после чего выполняется поиск 3-х самых активных контрибьютеров. Имена найденных разработчиков записываются в файл, который впоследствии отправляется вам на почту.

В рамках практической реализации данной задачи вам необходимо разработать процедуру формирование отчета “Топ-3 контрибьютера”. Данная процедура принимает на вход текстовый файл (commits.txt), содержащий данные о коммитах (построчно). Каждая строка содержит сведения о коммите в релизную ветку в формате: “_<Имя пользователя> <Сокращенный хэш коммита> <Дата и время коммита>_”.
Например: AIvanov 25ec001 2024-04-24T13:56:39.492

К данным предъявляются следующие требования:
- имя пользователя может содержать латинские символы в любом регистре, цифры (но не начинаться с них), а также символ "_";
- сокращенный хэш коммита представляет из себя строку в нижнем регистре, состояющую из 7 символов: букв латинского алфавита, а также цифр;
- дата и время коммита в формате YYYY-MM-ddTHH:mm:ss.

В результате работы процедура формирует новый файл (result.txt), содержащий информацию об именах 3-х самых активных пользователей по одному в каждой строке в порядке убывания места в рейтинге. Пример содержимого файла:
AIvanov
AKalinina
CodeKiller777

Ручной ввод пути к файлу (через консоль, через правку переменной в коде и т.д.) недопустим. Необходимость любых ручных действий с файлами в процессе работы программы будут обнулять решение.

## Автор решения
Димидов Илья Георгиевич

## Описание реализации
Хранение путей до файлов commits.txt и result.txt осуществляется в .properties файле для возможности удобного редактирования пути в случае необходимости при проверке.

Получение этих путей реализовано в методе readPathFromProperties класса FileReader. В качестве аргумента передается ключ записи пути в .properties файле.
Чтение коммитов из commits.txt реализовано в методе readCommits класса FileReader, которому на вход передается путь к файлу.
После чтения все коммиты помещаются в список в виде экземпляров рекорда Commit.

Далее список передается в метод getContributorsRanked класса ContributionRanker, где он проходит несколько стадий обработки:
- Удаление всех некорректных коммитов (в соответствии с требованиями, прописанными в тз) с помощью класса CommitValidator. Он использует регулярные выражения, а так же класс LocalDateTime (проверка на соответствие допустимым значениям времени и дат - не более 24 часов, не более 60 минут и т.д.) для проверки данных.
- Создание словаря <Имя пользователя - количество коммитов>.
- Сортировка пользователей по количеству коммитов от большего к меньшему и занесение их имен в список в этом порядке.

После этого отсортированный список передается в метод uploadResult класса ResultUploader. В качестве аргумента передается список, количество призеров и путь до файла с результатами. Метод производит запись призеров в конечный файл.

Все методы для чтения и записи используют конструкцию try-with-resources с блоком catch для вывода сообщения об ошибке.

В случае, когда количество призеров превышает количество пользователей, сделавших корректные коммиты, программа завершается после вывода сообщения об этой проблеме.

## Инструкция по сборке и запуску решения
Точкой входа в проект является класс RatingCreator, находящийся по пути "src\main\java".

Файлы commits.txt и result.txt находятся по путям "src/main/resources/input/commits.txt" и "src/main/resources/output/result.txt" соответственно.

Пути к ним прописаны в "src/main/resources/properties/paths.properties", так что, при желании изменить местонахождение файлов или их имена, необходимо изменить значения путей на новые там.
